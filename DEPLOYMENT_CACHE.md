# ç¼“å­˜ç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿæ¥æ˜¾è‘—æå‡æ€§èƒ½ï¼Œä½†ç¼“å­˜æ•°æ®ä¸åº”è¯¥è¢«ç‰ˆæœ¬æ§åˆ¶ã€‚æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•åœ¨ä¸åŒç¯å¢ƒä¸­æ­£ç¡®ç®¡ç†ç¼“å­˜ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
cache_data/
â”œâ”€â”€ data/       # APIæ•°æ®ç¼“å­˜ (TTL: 5åˆ†é’Ÿ)
â”œâ”€â”€ chart/      # å›¾è¡¨ç¼“å­˜ (TTL: 10åˆ†é’Ÿ)  
â””â”€â”€ analysis/   # AIåˆ†æç¼“å­˜ (TTL: 30åˆ†é’Ÿ)
```

## â˜ï¸ äº‘ç«¯éƒ¨ç½²ç­–ç•¥

### 1. ç¼“å­˜æ•°æ®å¤„ç†åŸåˆ™

âœ… **åº”è¯¥åšçš„:**
- ç¼“å­˜ç›®å½•åœ¨æ¯ä¸ªç¯å¢ƒä¸­è‡ªåŠ¨åˆ›å»º
- ç¼“å­˜åœ¨è¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆ
- å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜
- ç›‘æ§ç¼“å­˜æ€§èƒ½

âŒ **ä¸åº”è¯¥åšçš„:**
- å°†ç¼“å­˜æ–‡ä»¶æäº¤åˆ°git
- åœ¨ç¯å¢ƒé—´åŒæ­¥ç¼“å­˜æ–‡ä»¶
- æ‰‹åŠ¨ç®¡ç†ç¼“å­˜æ–‡ä»¶

### 2. æ–°ç¯å¢ƒåˆå§‹åŒ–

```bash
# 1. å…‹éš†ä»£ç ï¼ˆä¸åŒ…å«ç¼“å­˜ï¼‰
git clone <repository>
cd project_alpha

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. åˆå§‹åŒ–ç¼“å­˜ç›®å½•
python scripts/cache_manager.py init

# 4. å¯åŠ¨åº”ç”¨ï¼ˆç¼“å­˜è‡ªåŠ¨ç”Ÿæˆï¼‰
python -m uvicorn main:app --host 0.0.0.0 --port 8000
```

### 3. Dockeréƒ¨ç½²é…ç½®

```dockerfile
# Dockerfile ä¸­çš„å»ºè®®é…ç½®
FROM python:3.11

WORKDIR /app
COPY . .

# å®‰è£…ä¾èµ–
RUN pip install -r requirements.txt

# åˆ›å»ºç¼“å­˜ç›®å½•ï¼ˆä½†ä¸å¤åˆ¶ç¼“å­˜æ–‡ä»¶ï¼‰
RUN mkdir -p cache_data/{data,chart,analysis}

# å¯åŠ¨åº”ç”¨
CMD ["python", "-m", "uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

## ğŸ› ï¸ ç¼“å­˜ç®¡ç†å·¥å…·

### ä½¿ç”¨ç¼“å­˜ç®¡ç†å™¨

```bash
# æŸ¥çœ‹ç¼“å­˜çŠ¶æ€
python scripts/cache_manager.py status

# æ¸…ç†æ‰€æœ‰ç¼“å­˜
python scripts/cache_manager.py clear

# æ¸…ç†ç‰¹å®šç±»åˆ«ç¼“å­˜
python scripts/cache_manager.py clear --category data

# æ¸…ç†è¿‡æœŸç¼“å­˜ï¼ˆæ¨èï¼‰
python scripts/cache_manager.py clear-expired

# åˆå§‹åŒ–ç¼“å­˜ç›®å½•
python scripts/cache_manager.py init
```

### APIç«¯ç‚¹ç®¡ç†

```bash
# è·å–ç¼“å­˜ç»Ÿè®¡
curl http://localhost:8000/api/cache/stats

# æ¸…ç†è¿‡æœŸç¼“å­˜
curl -X POST http://localhost:8000/api/cache/clear

# æ¸…ç©ºæ‰€æœ‰ç¼“å­˜ï¼ˆè°ƒè¯•ç”¨ï¼‰
curl -X DELETE http://localhost:8000/api/cache/all
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ç¼“å­˜å‘½ä¸­ç‡ç›‘æ§

```bash
# è·å–æ€§èƒ½ç»Ÿè®¡
curl http://localhost:8000/api/performance/stats

# è·å–è¯¦ç»†æŠ¥å‘Š
curl http://localhost:8000/api/performance/report
```

### é¢„æœŸæ€§èƒ½æŒ‡æ ‡

| åœºæ™¯ | ç›®æ ‡å‘½ä¸­ç‡ | é¢„æœŸå“åº”æ—¶é—´ |
|------|------------|--------------|
| æ•°æ®ç¼“å­˜ | 70%+ | æ•°æ®è·å–: <0.1s |
| å›¾è¡¨ç¼“å­˜ | 60%+ | å›¾è¡¨ç”Ÿæˆ: <0.5s |
| åˆ†æç¼“å­˜ | 80%+ | AIåˆ†æ: <0.1s |

## ğŸ”§ ç»´æŠ¤ä»»åŠ¡

### æ—¥å¸¸ç»´æŠ¤

```bash
# æ¯æ—¥æ‰§è¡Œ - æ¸…ç†è¿‡æœŸç¼“å­˜
0 2 * * * /path/to/project/scripts/cache_manager.py clear-expired

# æ¯å‘¨æ‰§è¡Œ - æ£€æŸ¥ç¼“å­˜çŠ¶æ€
0 9 * * 1 /path/to/project/scripts/cache_manager.py status
```

### æ•…éšœæ’é™¤

**é—®é¢˜1: ç¼“å­˜ç›®å½•ä¸å­˜åœ¨**
```bash
python scripts/cache_manager.py init
```

**é—®é¢˜2: ç¼“å­˜å ç”¨ç©ºé—´è¿‡å¤§**
```bash
python scripts/cache_manager.py status  # æ£€æŸ¥å¤§å°
python scripts/cache_manager.py clear   # æ¸…ç†ç¼“å­˜
```

**é—®é¢˜3: æ€§èƒ½ä¸‹é™**
```bash
# æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡
curl http://localhost:8000/api/performance/stats
# é‡ç½®æ€§èƒ½è®¡æ•°å™¨
curl -X POST http://localhost:8000/api/performance/reset
```

## ğŸš€ äº‘æœåŠ¡å™¨éƒ¨ç½²æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥

- [ ] `.gitignore` åŒ…å« `cache_data/`
- [ ] ç¯å¢ƒå˜é‡é…ç½®å®Œæ•´
- [ ] ä¾èµ–åŒ…å®‰è£…å®Œæˆ
- [ ] ç¼“å­˜ç›®å½•æƒé™æ­£ç¡®

### éƒ¨ç½²åéªŒè¯

- [ ] ç¼“å­˜ç›®å½•è‡ªåŠ¨åˆ›å»º
- [ ] APIå¥åº·æ£€æŸ¥é€šè¿‡: `/api/health`
- [ ] é¦–æ¬¡æŸ¥è¯¢æˆåŠŸç”Ÿæˆç¼“å­˜
- [ ] ç¬¬äºŒæ¬¡æŸ¥è¯¢å‘½ä¸­ç¼“å­˜

### ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. **ç›‘æ§è®¾ç½®**
   - è®¾ç½®ç¼“å­˜å‘½ä¸­ç‡å‘Šè­¦ï¼ˆ<50%ï¼‰
   - ç›‘æ§ç£ç›˜ç©ºé—´ä½¿ç”¨
   - å®šæœŸæ£€æŸ¥åº”ç”¨æ€§èƒ½

2. **å¤‡ä»½ç­–ç•¥**
   - ä»£ç å¤‡ä»½ï¼ˆä¸åŒ…å«ç¼“å­˜ï¼‰
   - é…ç½®æ–‡ä»¶å¤‡ä»½
   - æ•°æ®åº“å¤‡ä»½ï¼ˆå¦‚æœæœ‰ï¼‰

3. **æ‰©å±•è€ƒè™‘**
   - å¤šå®ä¾‹éƒ¨ç½²æ—¶ç¼“å­˜ä¸å…±äº«
   - å¯è€ƒè™‘Redisç­‰å¤–éƒ¨ç¼“å­˜
   - è´Ÿè½½å‡è¡¡é…ç½®

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ç¼“å­˜ç­–ç•¥ä¼˜åŒ–**
   - æ ¹æ®ä½¿ç”¨æ¨¡å¼è°ƒæ•´TTL
   - ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ
   - å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜

2. **å­˜å‚¨ä¼˜åŒ–**
   - ä½¿ç”¨SSDå­˜å‚¨æå‡æ€§èƒ½
   - å®šæœŸæ£€æŸ¥ç£ç›˜ç©ºé—´
   - è€ƒè™‘ç¼“å­˜å‹ç¼©

3. **ç½‘ç»œä¼˜åŒ–**
   - ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº
   - ä¼˜åŒ–APIå“åº”æ ¼å¼
   - å®ç°HTTPç¼“å­˜å¤´

---

**ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ**
- æŸ¥çœ‹ [README.md](README.md) äº†è§£åŸºæœ¬ä½¿ç”¨
- è¿è¡Œ `python scripts/cache_manager.py --help` æŸ¥çœ‹å·¥å…·å¸®åŠ©
- è®¿é—® `/api/health` æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ 